<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.4.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.3/css/all.min.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css">

<script class="next-config" data-name="main" type="application/json">{&quot;hostname&quot;:&quot;tzxhy.github.io&quot;,&quot;root&quot;:&quot;&#x2F;&quot;,&quot;images&quot;:&quot;&#x2F;images&quot;,&quot;scheme&quot;:&quot;Mist&quot;,&quot;version&quot;:&quot;8.4.0&quot;,&quot;exturl&quot;:false,&quot;sidebar&quot;:{&quot;position&quot;:&quot;left&quot;,&quot;display&quot;:&quot;post&quot;,&quot;padding&quot;:18,&quot;offset&quot;:12,&quot;b2t&quot;:false,&quot;scrollpercent&quot;:false,&quot;onmobile&quot;:false},&quot;copycode&quot;:false,&quot;bookmark&quot;:{&quot;enable&quot;:false,&quot;color&quot;:&quot;#222&quot;,&quot;save&quot;:&quot;auto&quot;},&quot;fancybox&quot;:true,&quot;mediumzoom&quot;:false,&quot;lazyload&quot;:false,&quot;pangu&quot;:false,&quot;comments&quot;:{&quot;style&quot;:&quot;tabs&quot;,&quot;active&quot;:null,&quot;storage&quot;:true,&quot;lazyload&quot;:false,&quot;nav&quot;:null},&quot;motion&quot;:{&quot;enable&quot;:false,&quot;async&quot;:false,&quot;transition&quot;:{&quot;post_block&quot;:&quot;fadeIn&quot;,&quot;post_header&quot;:&quot;slideDownIn&quot;,&quot;post_body&quot;:&quot;slideDownIn&quot;,&quot;coll_header&quot;:&quot;slideLeftIn&quot;,&quot;sidebar&quot;:&quot;slideUpIn&quot;}},&quot;prism&quot;:false,&quot;i18n&quot;:{&quot;placeholder&quot;:&quot;Searching...&quot;,&quot;empty&quot;:&quot;We didn&#39;t find any results for the search: ${query}&quot;,&quot;hits_time&quot;:&quot;${hits} results found in ${time} ms&quot;,&quot;hits&quot;:&quot;${hits} results found&quot;}}</script>
<meta property="og:type" content="website">
<meta property="og:title" content="CMeUp">
<meta property="og:url" content="https://tzxhy.github.io/page/4/index.html">
<meta property="og:site_name" content="CMeUp">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="谭智轩">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="https://tzxhy.github.io/page/4/">



<script class="next-config" data-name="page" type="application/json">{&quot;sidebar&quot;:&quot;&quot;,&quot;isHome&quot;:true,&quot;isPost&quot;:false,&quot;lang&quot;:&quot;en&quot;,&quot;comments&quot;:&quot;&quot;,&quot;permalink&quot;:&quot;&quot;,&quot;path&quot;:&quot;page&#x2F;4&#x2F;index.html&quot;,&quot;title&quot;:&quot;&quot;}</script>

<script class="next-config" data-name="calendar" type="application/json">&quot;&quot;</script>
<title>CMeUp</title><script src="/js/config.js"></script>
  




  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
</head>

<body itemscope itemtype="http://schema.org/WebPage">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="Toggle navigation bar" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">CMeUp</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录一些学习心得，QQ:1139723651.</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home"><a href="/" rel="section"><i class="home fa-fw"></i>Home</a></li>
        <li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="tags fa-fw"></i>Tags</a></li>
        <li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="th fa-fw"></i>Categories</a></li>
        <li class="menu-item menu-item-archives"><a href="/archives/" rel="section"><i class="archive fa-fw"></i>Archives</a></li>
  </ul>
</nav>




</div>
        
  
  <div class="toggle sidebar-toggle" role="button">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-overview-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          Table of Contents
        </li>
        <li class="sidebar-nav-overview">
          Overview
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
  <p class="site-author-name" itemprop="name">谭智轩</p>
  <div class="site-description" itemprop="description"></div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">82</span>
          <span class="site-state-item-name">posts</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">30</span>
        <span class="site-state-item-name">categories</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">82</span>
        <span class="site-state-item-name">tags</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="https://github.com/tzxhy" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;tzxhy" rel="noopener" target="_blank"><i class="github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://juejin.cn/user/1820446984508072" title="掘金 → https:&#x2F;&#x2F;juejin.cn&#x2F;user&#x2F;1820446984508072" rel="noopener" target="_blank">掘金</a>
      </span>
      <span class="links-of-author-item">
        <a href="https://www.yuque.com/tanzhixuan-zebzs" title="语雀 → https:&#x2F;&#x2F;www.yuque.com&#x2F;tanzhixuan-zebzs" rel="noopener" target="_blank">语雀</a>
      </span>
  </div>



        </div>
      </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="back-to-top" role="button" aria-label="Back to top">
    <i class="fa fa-arrow-up"></i>
    <span>0%</span>
  </div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner index posts-expand">

    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/28/GraphQL%E5%85%A5%E9%97%A8-%E4%B8%80/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/28/GraphQL%E5%85%A5%E9%97%A8-%E4%B8%80/" class="post-title-link" itemprop="url">GraphQL入门(2)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-27 18:03:07" itemprop="dateCreated datePublished" datetime="2019-03-27T18:03:07Z">2019-03-27</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/GraphQL/" itemprop="url" rel="index"><span itemprop="name">GraphQL</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p>上次说了 query 和 update ，这次说 schema 和 type 。</p>
<h1 id="Schema-and-Type"><a href="#Schema-and-Type" class="headerlink" title="Schema and Type"></a>Schema and Type</h1><h2 id="类型系统"><a href="#类型系统" class="headerlink" title="类型系统"></a>类型系统</h2><p>以一个例子开始：<br>req:</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  hero &#123;</span><br><span class="line">    name</span><br><span class="line">    appearsIn</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>res:</p>
<figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">&quot;data&quot;</span>: &#123;</span><br><span class="line">    <span class="attr">&quot;hero&quot;</span>: &#123;</span><br><span class="line">      <span class="attr">&quot;name&quot;</span>: <span class="string">&quot;R2-D2&quot;</span>,</span><br><span class="line">      <span class="attr">&quot;appearsIn&quot;</span>: [</span><br><span class="line">        <span class="string">&quot;NEWHOPE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;EMPIRE&quot;</span>,</span><br><span class="line">        <span class="string">&quot;JEDI&quot;</span></span><br><span class="line">      ]</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>会经历这些步骤：</p>
<ol>
<li>从特殊的『root』对象开始；</li>
<li>选择 hero 字段；</li>
<li>对于返回的字段 hero，我们选择 name 和 appearsIn 字段。</li>
</ol>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/03/28/GraphQL%E5%85%A5%E9%97%A8-%E4%B8%80/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/27/GraphQL%E5%85%A5%E9%97%A8-%E4%BA%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/27/GraphQL%E5%85%A5%E9%97%A8-%E4%BA%8C/" class="post-title-link" itemprop="url">GraphQL入门(1)</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-26 18:26:51" itemprop="dateCreated datePublished" datetime="2019-03-26T18:26:51Z">2019-03-26</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/GraphQL/" itemprop="url" rel="index"><span itemprop="name">GraphQL</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <p><a target="_blank" rel="noopener" href="https://graphql.github.io/">官网</a>，可以理解成翻译官方文档。在下篇中将来一发实战。</p>
<h1 id="介绍"><a href="#介绍" class="headerlink" title="介绍"></a>介绍</h1><p>GraphQL是API查询语言，也是一个在服务端根据你定义的类型系统数据来执行查询的运行时。它并不与任何数据库或者存储引擎绑定。通过描述你需要的数据格式，返回对应的JSON数据，最大可能地减少多余字段以及请求数量。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/03/27/GraphQL%E5%85%A5%E9%97%A8-%E4%BA%8C/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/14/v11-10-nodejs%E5%AD%A6%E4%B9%A0-%E4%B8%89/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/14/v11-10-nodejs%E5%AD%A6%E4%B9%A0-%E4%B8%89/" class="post-title-link" itemprop="url">v11-10-nodejs学习-三</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-14 14:50:13" itemprop="dateCreated datePublished" datetime="2019-03-14T14:50:13Z">2019-03-14</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/Nodejs/" itemprop="url" rel="index"><span itemprop="name">Nodejs</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <span id="more"></span>
<h1 id="Globals"><a href="#Globals" class="headerlink" title="Globals"></a>Globals</h1><h3 id="queueMicrotask-callback"><a href="#queueMicrotask-callback" class="headerlink" title="queueMicrotask(callback)"></a>queueMicrotask(callback)</h3><p>v11新增的API。用于将callback加入到当前phase的microtask队列里。需要注意的是：<strong>process.nextTick在Nodejs的每次循环每个phase中总是会比microtask queue优先执行</strong></p>
<h3 id="TextDecoder-TextEncoder"><a href="#TextDecoder-TextEncoder" class="headerlink" title="TextDecoder/TextEncoder"></a>TextDecoder/TextEncoder</h3><p>文本的编码、解码</p>
<h3 id="URL-URLSearchParams"><a href="#URL-URLSearchParams" class="headerlink" title="URL/URLSearchParams"></a>URL/URLSearchParams</h3><p>WHATWG制定。下文应该会有相关介绍。</p>
<hr>
<h2 id="Inspector"><a href="#Inspector" class="headerlink" title="Inspector"></a>Inspector</h2><p>可通过Inspector与v8的Inspector交互</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> inspector = <span class="built_in">require</span>(<span class="string">&#x27;inspector&#x27;</span>);</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Modules"><a href="#Modules" class="headerlink" title="Modules"></a>Modules</h2><h3 id="缓存"><a href="#缓存" class="headerlink" title="缓存"></a>缓存</h3><p>默认下nodejs会对加载过的module进行缓存。但是，当操作系统为大小写不敏感（比如MacOS）时，require(‘A.js’);require(‘a.js’); 会导致缓存两次。同时，不同代码处的requre(‘a’)可能返回不一样的模块，具体参考nodejs的模块加载机制。</p>
<h3 id="require-main-module"><a href="#require-main-module" class="headerlink" title="require.main === module"></a>require.main === module</h3><p>可以用这个来判断当前文件是否是nodejs直接调用的文件。</p>
<h3 id="循环引用"><a href="#循环引用" class="headerlink" title="循环引用"></a>循环引用</h3><p>实际开发中很可能产生循环引用：a.js引用了b.js，b.js也引用了a.js。Nodejs的处理方式是产生循环引用时，先返回一个<strong>未完成的copy</strong>(这里是a.js)给调用者(这里是b.js)，等待调用者加载完毕，再回过来加载调用者。</p>
<h3 id="dirname-filename"><a href="#dirname-filename" class="headerlink" title="__dirname, __filename"></a>__dirname, __filename</h3><p>分别表示当前文件的目录和当前文件绝对路径</p>
<h3 id="exports-和-module-exports"><a href="#exports-和-module-exports" class="headerlink" title="exports 和 module.exports"></a>exports 和 module.exports</h3><p>exports就是module.exports对象的引用。导出时具体有什么区别就跟js中一样了。可以把exports理解成函数的参数。它能保持对原对象的引用。</p>
<h3 id="require-cache"><a href="#require-cache" class="headerlink" title="require.cache"></a>require.cache</h3><p>返回一个对象，键值对是文件模块引用的其他模块。可以删除某个键值对a，在下次require(‘a’)时会重新加载。</p>
<h3 id="require-resolve-request-options"><a href="#require-resolve-request-options" class="headerlink" title="require.resolve(request[, options])"></a>require.resolve(request[, options])</h3><p>返回找到的文件模块的path</p>
<h3 id="require-resolve-paths-request"><a href="#require-resolve-paths-request" class="headerlink" title="require.resolve.paths(request)"></a>require.resolve.paths(request)</h3><p>返回找到的所有文件模块的path</p>
<hr>
<h2 id="Net"><a href="#Net" class="headerlink" title="Net"></a>Net</h2><hr>
<h2 id="Path"><a href="#Path" class="headerlink" title="Path"></a>Path</h2><h3 id="Path-resolve"><a href="#Path-resolve" class="headerlink" title="Path.resolve"></a>Path.resolve</h3><p>如果首个参数不是绝对路径，那么会使用process.cwd()  （当前工作目录，就是启动node的目录）作为根路径。</p>
<h3 id="Path-posix"><a href="#Path-posix" class="headerlink" title="Path.posix"></a>Path.posix</h3><p>返回一个包含平台相关的path对象。比如想在Linux上拼凑windows平台的路径。</p>
<hr>
<h2 id="perf-hooks"><a href="#perf-hooks" class="headerlink" title="perf_hooks"></a>perf_hooks</h2><hr>
<h2 id="Process"><a href="#Process" class="headerlink" title="Process"></a>Process</h2><p>process 对象，能提供当前Nodejs进程信息以及控制当前进程。</p>
<h3 id="Process-Events"><a href="#Process-Events" class="headerlink" title="Process Events"></a>Process Events</h3><p>process 对象也是EventEmitter的对象。有：</p>
<ul>
<li>beforeExit</li>
<li>disconnect</li>
<li>exit</li>
<li>message</li>
<li>multipleResolves <strong>V10.12新增</strong> 当一个Promise被多次resolve或者reject或者在resolve后reject或者反过来。该回调为错误捕获。</li>
<li>rejectionHandled</li>
<li>uncaughtException</li>
<li>unhandledRejection</li>
<li>warning</li>
<li>Signal Events<h4 id="正确使用uncaughtException事件"><a href="#正确使用uncaughtException事件" class="headerlink" title="正确使用uncaughtException事件"></a>正确使用uncaughtException事件</h4>该事件在触发后，进程会退出。应该在该回调中执行一些资源的清理（比如打开的文件）以及记录相关崩溃信息，而不要妄图去修复进城，期待它会再次好起来。详见<a target="_blank" rel="noopener" href="https://nodejs.org/api/process.html">官网</a>关于<strong>Warning: Using <code>&#39;uncaughtException&#39;</code> correctly</strong>一节。<h3 id="process-exit"><a href="#process-exit" class="headerlink" title="process.exit()"></a>process.exit()</h3>会尽快退出进程，而不管是否还有其他异步回调等待完成。优雅的方式是使用process.exitCode。<h3 id="process-abort"><a href="#process-abort" class="headerlink" title="process.abort()"></a>process.abort()</h3>立即结束Node.js进程，生成一个核心文件。不能在Worker threads中调用。<h3 id="process-allowedNodeEnvironmentFlags"><a href="#process-allowedNodeEnvironmentFlags" class="headerlink" title="process.allowedNodeEnvironmentFlags"></a>process.allowedNodeEnvironmentFlags</h3></li>
</ul>
<p><strong>V10.10新增</strong>返回一个只读Set，包含允许的NODE_OPTIONS环境变量。</p>
<h3 id="process-chdir-directory"><a href="#process-chdir-directory" class="headerlink" title="process.chdir(directory)"></a>process.chdir(directory)</h3><p>更换当前目录</p>
<h3 id="process-stderr"><a href="#process-stderr" class="headerlink" title="process.stderr"></a>process.stderr</h3><p>返回一个链接到stderr（及fd为2）的流。除非fd 2指向一个文件（这时是可写流），否则它都是一个net.Socket（可读可写流）。</p>
<h3 id="process-stdin"><a href="#process-stdin" class="headerlink" title="process.stdin"></a>process.stdin</h3><p>返回一个链接到stdin（及fd为0）的流。除非fd 0指向一个文件（这时是可读流），否则它都是一个net.Socket（可读可写流）。</p>
<h3 id="process-stdout"><a href="#process-stdout" class="headerlink" title="process.stdout"></a>process.stdout</h3><p>返回一个链接到stdin（及fd为1）的流。除非fd 1指向一个文件（这时是可写流），否则它都是一个net.Socket（可读可写流）。</p>
<h3 id="process-stdout-and-process-stderr注意点"><a href="#process-stdout-and-process-stderr注意点" class="headerlink" title="process.stdout and process.stderr注意点"></a>process.stdout and process.stderr注意点</h3><ol>
<li>它们各自被console.log和console.error内部使用；</li>
<li>写操作可能是同步的，取决于流链接到的是什么，以及系统是windows还是POSIX<ul>
<li>文件：在windows和POSIX上都是同步的</li>
<li>TTYs：windows上异步，POSIX上同步</li>
<li>管道（以及socket）：windwos上同步，POSIX上异步</li>
</ul>
</li>
</ol>
<hr>
<h2 id="Stream"><a href="#Stream" class="headerlink" title="Stream"></a>Stream</h2><hr>
<h2 id="Trace-Events"><a href="#Trace-Events" class="headerlink" title="Trace Events"></a>Trace Events</h2><hr>
<h2 id="TTY"><a href="#TTY" class="headerlink" title="TTY"></a>TTY</h2><p>主要跟终端相关的操作。</p>
<hr>
<h2 id="V8"><a href="#V8" class="headerlink" title="V8"></a>V8</h2><p>V8模块包含内嵌在NodejsV8版本的二进制文件中的API。由引用：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> v8 = <span class="built_in">require</span>(<span class="string">&#x27;v8&#x27;</span>);</span><br></pre></td></tr></table></figure>
<h3 id="v8-cachedDataVersionTag"><a href="#v8-cachedDataVersionTag" class="headerlink" title="v8.cachedDataVersionTag()"></a>v8.cachedDataVersionTag()</h3><p>返回一个由v8版本、命令行标志和CPU特性决定的衍生值，为一个整数。主要用于判断 <strong>vm.Script cachedData buffer</strong> 是否与当前nodejs实例兼容。</p>
<h3 id="v8-getHeapSpaceStatistics"><a href="#v8-getHeapSpaceStatistics" class="headerlink" title="v8.getHeapSpaceStatistics()"></a>v8.getHeapSpaceStatistics()</h3><p>返回一个对象数组。代表了V8的堆空间的统计情况。</p>
<h3 id="v8-getHeapStatistics"><a href="#v8-getHeapStatistics" class="headerlink" title="v8.getHeapStatistics()"></a>v8.getHeapStatistics()</h3><p>返回堆统计。</p>
<h3 id="v8-setFlagsFromString-flags"><a href="#v8-setFlagsFromString-flags" class="headerlink" title="v8.setFlagsFromString(flags)"></a>v8.setFlagsFromString(flags)</h3><p>编程设置v8的命令行flag。使用起来得当心，VM已经启动后再去修改设置，可能引起不可预估的行为，比如崩溃或者数据丢失，或者该设置无效。</p>
<h3 id="Serialization-API"><a href="#Serialization-API" class="headerlink" title="Serialization API"></a>Serialization API</h3><p>处于实验阶段。</p>
<h4 id="v8-serialize-value"><a href="#v8-serialize-value" class="headerlink" title="v8.serialize(value)"></a>v8.serialize(value)</h4><p>value可为任意值。将value序列化为一个buffer对象。</p>
<h4 id="v8-deserialize-buffer"><a href="#v8-deserialize-buffer" class="headerlink" title="v8.deserialize(buffer)"></a>v8.deserialize(buffer)</h4><p>将buffer反序列化。buffer可为Buffer/TypedArray/DataView。</p>
<h3 id="v8-Serializer"><a href="#v8-Serializer" class="headerlink" title="v8.Serializer"></a>v8.Serializer</h3><h4 id="new-Serializer"><a href="#new-Serializer" class="headerlink" title="new Serializer()"></a>new Serializer()</h4><p>实例序列。</p>
<h4 id="serializer-writeHeader"><a href="#serializer-writeHeader" class="headerlink" title="serializer.writeHeader()"></a>serializer.writeHeader()</h4><p>写入头信息，包含格式版本等。</p>
<h4 id="serializer-writeValue-value"><a href="#serializer-writeValue-value" class="headerlink" title="serializer.writeValue(value)"></a>serializer.writeValue(value)</h4><p>写入值。</p>
<h4 id="serializer-releaseBuffer"><a href="#serializer-releaseBuffer" class="headerlink" title="serializer.releaseBuffer()"></a>serializer.releaseBuffer()</h4><p>返回Buffer。返回内部存储的buffer。当buffer被释放时，serializer就不能再使用了。如果先前写入失败，调用该方法结果不可知。</p>
<h4 id="serializer-transferArrayBuffer-id-arrayBuffer"><a href="#serializer-transferArrayBuffer-id-arrayBuffer" class="headerlink" title="serializer.transferArrayBuffer(id, arrayBuffer)"></a>serializer.transferArrayBuffer(id, arrayBuffer)</h4><h4 id="serializer-writeUint32-等"><a href="#serializer-writeUint32-等" class="headerlink" title="serializer.writeUint32 等"></a>serializer.writeUint32 等</h4><h3 id="v8-Deserializer-略"><a href="#v8-Deserializer-略" class="headerlink" title="v8.Deserializer 略"></a>v8.Deserializer 略</h3><hr>
<h2 id="VM"><a href="#VM" class="headerlink" title="VM"></a>VM</h2><p>vm模块提供API来编译(javascript本身是解释型语言，不需要传统意义的编译，此处的编译应该是转为可执行代码，理论上任何代码都需这一步)代码及运行在V8虚拟机环境中。vm不提供任何安全机制，不要使用它运行不可信的代码。<br>vm提供了一个类似沙盒的容器，内部的环境与主程序环境隔离。可以传递给vm一个环境对象，这个对象的键值将作为sandbox的global。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="built_in">require</span>(<span class="string">&#x27;vm&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> x = <span class="number">1</span>;</span><br><span class="line"><span class="keyword">const</span> sandbox = &#123; <span class="attr">x</span>: <span class="number">2</span> &#125;;</span><br><span class="line">vm.createContext(sandbox); <span class="comment">// Contextify the sandbox.</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> code = <span class="string">&#x27;x += 40; var y = 17;&#x27;</span>;</span><br><span class="line"><span class="comment">// `x` and `y` are global variables in the sandboxed environment.</span></span><br><span class="line"><span class="comment">// Initially, x has the value 2 because that is the value of sandbox.x.</span></span><br><span class="line">vm.runInContext(code, sandbox);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(sandbox.x); <span class="comment">// 42</span></span><br><span class="line"><span class="built_in">console</span>.log(sandbox.y); <span class="comment">// 17</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(x); <span class="comment">// 1; y is not defined.</span></span><br></pre></td></tr></table></figure>
<h3 id="Class-vm-Script"><a href="#Class-vm-Script" class="headerlink" title="Class: vm.Script"></a>Class: vm.Script</h3><p>vm.Script的实例包含了能直接在特定沙盒中运行的预编译代码。</p>
<h4 id="Constructor-new-vm-Script-code-options"><a href="#Constructor-new-vm-Script-code-options" class="headerlink" title="Constructor: new vm.Script(code[, options])"></a>Constructor: new vm.Script(code[, options])</h4><ul>
<li>code: 要预编译的代码</li>
<li>options: 对象或者字符串<ul>
<li>filename: 用于stack追踪。默认’evalmachine.<anonymous>‘</li>
<li>lineOffset: 指定行数的偏移。默认0</li>
<li>columnOffset</li>
<li>cachedData: <Buffer>|<TypedArray>|<DataView> </li>
<li>importModuleDynamically: 当import()被调用时回调。<h4 id="script-createCachedData"><a href="#script-createCachedData" class="headerlink" title="script.createCachedData()"></a>script.createCachedData()</h4>v10.6.0增加<br>创建代码的缓存，可用于Script的构造器中cachedData选项。</li>
</ul>
</li>
</ul>
<h4 id="script-runInContext-contextifiedSandbox-options"><a href="#script-runInContext-contextifiedSandbox-options" class="headerlink" title="script.runInContext(contextifiedSandbox[, options])"></a>script.runInContext(contextifiedSandbox[, options])</h4><ul>
<li>contextifiedSandbox: 一个通过vm.createContext(context)修改过的context对象</li>
<li>options: <ul>
<li>displayErrors: <Boolean></li>
<li>timeout: 超时时间。严格大于0的整数</li>
<li>breakOnSigint</li>
</ul>
</li>
<li>Returns: 返回最后一条语句的结果</li>
</ul>
<h4 id="script-runInNewContext-sandbox-options"><a href="#script-runInNewContext-sandbox-options" class="headerlink" title="script.runInNewContext([sandbox[, options]])"></a>script.runInNewContext([sandbox[, options]])</h4><ul>
<li>sandbox: 将被contextified的对象。<h4 id="script-runInThisContext-options"><a href="#script-runInThisContext-options" class="headerlink" title="script.runInThisContext([options])"></a>script.runInThisContext([options])</h4>运行在当前环境（主程序中）<h4 id="Timer等相关"><a href="#Timer等相关" class="headerlink" title="Timer等相关"></a>Timer等相关</h4>由于内部机制，process.nextTick、microtask、Promise等异步实现在v8和nodejs内，可能导致在某个环境中的代码逃离timeout。如下：<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> vm = <span class="built_in">require</span>(<span class="string">&#x27;vm&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">loop</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="keyword">while</span> (<span class="number">1</span>) <span class="built_in">console</span>.log(<span class="built_in">Date</span>.now());</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">vm.runInNewContext(</span><br><span class="line">  <span class="string">&#x27;Promise.resolve().then(loop);&#x27;</span>,</span><br><span class="line">  &#123; loop, <span class="built_in">console</span> &#125;,</span><br><span class="line">  &#123; <span class="attr">timeout</span>: <span class="number">5</span> &#125;</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
即使设置了timeout，程序也会被无限死循环打印console.log，而不退出。（不存在是否有vm的参与，受timer的具体实现）。</li>
</ul>
<hr>
<h2 id="Zlib"><a href="#Zlib" class="headerlink" title="Zlib"></a>Zlib</h2><hr>
<h2 id="Worker-Threads"><a href="#Worker-Threads" class="headerlink" title="Worker Threads"></a>Worker Threads</h2><p>当前为试验阶段。工作线程为Nodejs添加了线程级的API。V10.5以后版本，开启需要加–experimental-worker选项。线程间通过channel通信。<br>Worker线程类似于HTML规范中的Worker，主要用于处理CPU密集型计算。不适合用作IO工作。<br>比起子进程、集群，worker线程能共享内存。能通过传递ArrayBuffer实例或者SharedArrayBuffer实例来共享数据。</p>
<h3 id="Worker-isMainThread"><a href="#Worker-isMainThread" class="headerlink" title="Worker.isMainThread"></a>Worker.isMainThread</h3><p><strong>v10.5.0新增</strong>，表示当前代码是否运行在Worker线程里。</p>
<h3 id="Worker-parentPort"><a href="#Worker-parentPort" class="headerlink" title="Worker.parentPort"></a>Worker.parentPort</h3><p><strong>v10.5.0新增</strong>，如果当前线程是worker线程，它指向父线程。</p>
<h3 id="Worker-threadId"><a href="#Worker-threadId" class="headerlink" title="Worker.threadId"></a>Worker.threadId</h3><p>当前线程ID。</p>
<h3 id="省略"><a href="#省略" class="headerlink" title="省略"></a>省略</h3><p>其它操作类似浏览器的worker。比如发送数据、监听事件等。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/07/ng-nodejs%E5%81%B6%E5%8F%91502/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/07/ng-nodejs%E5%81%B6%E5%8F%91502/" class="post-title-link" itemprop="url">ng-nodejs偶发502</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-07 15:32:32" itemprop="dateCreated datePublished" datetime="2019-03-07T15:32:32Z">2019-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%A1%88%E4%BE%8B/" itemprop="url" rel="index"><span itemprop="name">案例</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="ng-node服务，导致ng报错：upstream提前关闭连接？"><a href="#ng-node服务，导致ng报错：upstream提前关闭连接？" class="headerlink" title="ng + node服务，导致ng报错：upstream提前关闭连接？"></a>ng + node服务，导致ng报错：upstream提前关闭连接？</h1><p>大前提是ng作为反向代理，upstream为node集群。</p>
<p>出错的触发条件是：某处发给ng一个带乱码的url请求，被ng转向node集群。</p>
<h2 id="背景介绍"><a href="#背景介绍" class="headerlink" title="背景介绍"></a>背景介绍</h2><p>&emsp;&emsp;随着部门的web接口不断增多，java后端逐步向node迁移。在我大住宿，这个web接口有一个好听的名字：热狗。不，不对，它叫hotdog。即从这个状态：<br><br /><br><img src="/images/ng-1.png" alt="ng"><br>&emsp;&emsp;变为了这个状态：<br><img src="/images/ng-2.png" alt="ng"><br>&emsp;&emsp;我们需要做的，就是搭建node服务，作为客户端和WEB_HOTDOG的通讯桥梁。</p>
<p>&emsp;&emsp;考虑到负载均衡，一般会采用类似nginx的软件作为反向代理。同时源服务器一般会有多台，所以经常看到这样的配置：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">upstream node_server &#123;</span><br><span class="line">    server 111.111.111.10:6666;</span><br><span class="line">    server 111.111.111.11:6666;</span><br><span class="line">    server 111.111.111.12:6666;</span><br><span class="line">    server 111.111.111.13:6666;</span><br><span class="line">&#125;</span><br><span class="line">server &#123;</span><br><span class="line">    ...</span><br><span class="line">    location /interface/to/location &#123;</span><br><span class="line">        proxy_pass http://node_server;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>&emsp;&emsp;即对/interface/to/location的请求会被转发到upstream  node_server上，当然详细的配置还有很多。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/03/07/ng-nodejs%E5%81%B6%E5%8F%91502/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/07/linux%E5%85%A5%E9%97%A8%E5%91%BD%E4%BB%A4%E8%A1%8C/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/07/linux%E5%85%A5%E9%97%A8%E5%91%BD%E4%BB%A4%E8%A1%8C/" class="post-title-link" itemprop="url">linux入门命令行</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-07 15:23:35" itemprop="dateCreated datePublished" datetime="2019-03-07T15:23:35Z">2019-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux/" itemprop="url" rel="index"><span itemprop="name">linux</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="linux入门走一波"><a href="#linux入门走一波" class="headerlink" title="linux入门走一波"></a>linux入门走一波</h1><ul>
<li><a href="#1">前沿-为啥要入门</a></li>
<li><a href="#2">常用指令</a></li>
</ul>
<h2 id="1">前沿-为啥要入门</h2>
虽然咱们是大前端，虽然咱们用的是JS，但是，咱的服务可都是放在linux服务上的啊。看个日志啥的，基本骚操作都不会，怎么调试bug呀？（这里多指node后端哈）。服务器上启动程序失败了，看错误好像是端口的问题，这个怎么操作啊？明明我的一个shell文件，为啥不能执行啊？等等。这样看似很基础的问题。其实我们不用掌握很多很多，掌握得多了，知识面广了，都有能力做运维了（当然得先做好本职工作，有时间有能力就可以去多学习）。下面我就分这么几方面来讲讲我眼中的入门。申明：本人linux渣渣一个，只是看linux从入门到精通后，把自己觉得有必要学习的东西分享一下，大神勿喷，有好的建议尽管来。哈哈。
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/03/07/linux%E5%85%A5%E9%97%A8%E5%91%BD%E4%BB%A4%E8%A1%8C/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/07/grep%E5%91%BD%E4%BB%A4%E6%8C%87%E5%8C%97/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/07/grep%E5%91%BD%E4%BB%A4%E6%8C%87%E5%8C%97/" class="post-title-link" itemprop="url">grep命令指北</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-07 14:58:56" itemprop="dateCreated datePublished" datetime="2019-03-07T14:58:56Z">2019-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/linux%E5%91%BD%E4%BB%A4/" itemprop="url" rel="index"><span itemprop="name">linux命令</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="grep命令指北"><a href="#grep命令指北" class="headerlink" title="grep命令指北"></a>grep命令指北</h1><p>在上周的shell分享中，涛哥给我们展示了grep强大的文本搜索能力。鉴于自己对这一功能的不熟悉，于是利用周末时间赶紧补习。</p>
<p>grep命令用于从给定的多行数据中筛选出匹配的行。常用的egrep是grep -E的alias，fgrep是grep -F的alias。下面我以man grep中的解释以及自己的一些操作来说明其主要S操作。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/03/07/grep%E5%91%BD%E4%BB%A4%E6%8C%87%E5%8C%97/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/07/%E5%85%B3%E4%BA%8E%E8%AF%B7%E6%B1%82%E4%BA%8C%E4%B8%89%E4%BA%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/07/%E5%85%B3%E4%BA%8E%E8%AF%B7%E6%B1%82%E4%BA%8C%E4%B8%89%E4%BA%8B/" class="post-title-link" itemprop="url">关于请求二三事</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-07 14:44:13" itemprop="dateCreated datePublished" datetime="2019-03-07T14:44:13Z">2019-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82/" itemprop="url" rel="index"><span itemprop="name">网络请求</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="关于请求二三事"><a href="#关于请求二三事" class="headerlink" title="关于请求二三事"></a>关于请求二三事</h1><p>请求的方式：</p>
<ol>
<li>get请求，又有几种细分的方式：</li>
<li>post请求，细分方式：</li>
<li>表单请求（先不管分类依据是否正确）</li>
</ol>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/03/07/%E5%85%B3%E4%BA%8E%E8%AF%B7%E6%B1%82%E4%BA%8C%E4%B8%89%E4%BA%8B/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/07/CSP%E7%AE%80%E4%BB%8B/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/07/CSP%E7%AE%80%E4%BB%8B/" class="post-title-link" itemprop="url">CSP简介</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-07 14:43:07" itemprop="dateCreated datePublished" datetime="2019-03-07T14:43:07Z">2019-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/HTTP/" itemprop="url" rel="index"><span itemprop="name">HTTP</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="关于网络请求的CSP相关"><a href="#关于网络请求的CSP相关" class="headerlink" title="关于网络请求的CSP相关"></a>关于网络请求的CSP相关</h1><p>啥是CSP？<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP%E3%80%82%E7%AE%80%E8%80%8C%E8%A8%80%E4%B9%8B%EF%BC%8C%E5%B0%B1%E6%98%AF%E5%8F%A6%E4%B8%80%E4%B8%AA%E8%83%BD%E4%BF%9D%E8%AF%81%E5%86%85%E5%AE%B9%E5%AE%89%E5%85%A8%E7%9A%84%E6%B5%8F%E8%A7%88%E5%99%A8%E6%96%B9%E5%BC%8F%E5%AE%9E%E7%8E%B0%E5%AE%89%E5%85%A8%E7%9A%84%E6%96%B9%E5%BC%8F%E3%80%82">https://developer.mozilla.org/zh-CN/docs/Web/HTTP/CSP。简而言之，就是另一个能保证内容安全的浏览器方式实现安全的方式。</a></p>
<p>其实不光是页面的form跳转，连ajax访问都不行。</p>
<p><img src="/images/csp-1.png" alt="csp"><br><img src="/images/csp-2.png" alt="csp"></p>
<p>由上图可见，github.com首页设置了Content-Security-Policy字段，该字段在支持CSP的浏览器里，会限制所有内容访问，包括正常的img加载，ajax的get、post，表单提交等网络访问。不过，只要在CSP的允许之内，就能正常访问（并不是说ajax就没有跨域的问题了）。CSP还不支持内联的js代码。真是忧愁。</p>

      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/07/chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8A%A0%E8%BD%BD%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/07/chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8A%A0%E8%BD%BD%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2/" class="post-title-link" itemprop="url">chrome浏览器加载一个页面</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-07 14:33:23" itemprop="dateCreated datePublished" datetime="2019-03-07T14:33:23Z">2019-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E6%B5%8F%E8%A7%88%E5%99%A8/" itemprop="url" rel="index"><span itemprop="name">浏览器</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="从输入一个地址开始说起"><a href="#从输入一个地址开始说起" class="headerlink" title="从输入一个地址开始说起"></a>从输入一个地址开始说起</h1><p>此处省略浏览器发起DNS解析请求、发送http请求等（后面可能会补充）。就说开始接收数据后浏览器做了啥。</p>
<h2 id="获取到一个html文件"><a href="#获取到一个html文件" class="headerlink" title="获取到一个html文件"></a>获取到一个html文件</h2><p>完成Finish Loading（html文件）后，开始进入Parse阶段。在此阶段，会从上到下依次解析，但是，会对html中指定的资源提前发起请求（就是说还没解析到这，但为了网络性能的提升，提前利用某种方式找到需要的资源文件，比如link中的css、script中的js、以及img等等。）。证据如下：</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/03/07/chrome%E6%B5%8F%E8%A7%88%E5%99%A8%E5%8A%A0%E8%BD%BD%E4%B8%80%E4%B8%AA%E9%A1%B5%E9%9D%A2/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




    


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="">
    <link itemprop="mainEntityOfPage" href="https://tzxhy.github.io/2019/03/07/react%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.gif">
      <meta itemprop="name" content="谭智轩">
      <meta itemprop="description" content="">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="CMeUp">
    </span>
      <header class="post-header">
        <h2 class="post-title" itemprop="name headline">
          <a href="/2019/03/07/react%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/" class="post-title-link" itemprop="url">react单例模式</a>
        </h2>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">Posted on</span>

      <time title="Created: 2019-03-07 14:22:40" itemprop="dateCreated datePublished" datetime="2019-03-07T14:22:40Z">2019-03-07</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">In</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/React/" itemprop="url" rel="index"><span itemprop="name">React</span></a>
        </span>
    </span>

  
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
          <h1 id="react单例组件的实现方式"><a href="#react单例组件的实现方式" class="headerlink" title="react单例组件的实现方式"></a>react单例组件的实现方式</h1><p>说到react的单例，大家可能一哈子就想到了像Alert啊，弹层啊、Confirm啊之类的。没毛病。单例嘛，就是全局唯一一个实例，不可能同时出现两个嘛。是的。极大部分业务情况下是这样的。所以，怎么实现一个单例组件，是个值得思考的问题。</p>
          <!--noindex-->
            <div class="post-button">
              <a class="btn" href="/2019/03/07/react%E5%8D%95%E4%BE%8B%E6%A8%A1%E5%BC%8F/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          <!--/noindex-->
        
      
    </div>

    
    
    

    <footer class="post-footer">
        <div class="post-eof"></div>
      
    </footer>
  </article>
</div>




  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left" aria-label="Previous page"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><span class="space">&hellip;</span><a class="page-number" href="/page/9/">9</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right" aria-label="Next page"></i></a>
  </nav>
<script src="/js/comments.js"></script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class=""></i>
  </span>
  <span class="author" itemprop="copyrightHolder">谭智轩</span>
</div>

    </div>
  </footer>

  
  <script src="https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/schemes/muse.js"></script><script src="/js/next-boot.js"></script>

  






  




<script src="/js/third-party/comments/livere.js"></script>

</body>
</html>
